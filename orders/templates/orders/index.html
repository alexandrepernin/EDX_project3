{% extends "orders/base.html" %}
{% block title %}
Menu
{% endblock %}

{% block menu_left %}
<p class="text-center"> Regular Pizzas </p>
<ul class="padded">
  {% for pizza in Regular_Pizzas %}
  <li> {{pizza}} </li>
  {% endfor %}
</ul>
<p class="text-center"> Toppings </p>
<ul class="padded">
  {% for topping in Toppings %}
  <li> {{topping}} </li>
  {% endfor %}
</ul>
{% endblock %}

{% block menu_right %}
<p class="text-center"> Sicilian Pizzas </p>
<ul>
  {% for pizza in Sicilian_Pizzas %}
  <li> {{pizza}} </li>
  {% endfor %}
</ul>
<p class="text-center"> Salads </p>
<ul>
  {% for salad in Salads %}
  <li> {{salad}} </li>
  {% endfor %}
</ul>
<p class="text-center"> Pastas </p>
<ul>
  {% for pasta in Pastas %}
  <li> {{pasta}} </li>
  {% endfor %}
</ul>
{% endblock %}

{% block choice %}
<p class="text-center"> Shopping Card </p>
<ul>
  {% for order in Orders %}
  <li> {{order}}: </li>
  <ul>
    {% for pizza in order.pizzas.all %}
    <li> {{pizza}} </li>
    {% endfor %}
  </ul>
  <ul>
    {% for salad in order.salads.all %}
    <li> {{salad}} </li>
    {% endfor %}
  </ul>
  <ul>
    {% for pasta in order.pastas.all %}
    <li> {{pasta}} </li>
    {% endfor %}
  </ul>
  {% endfor %}
</ul>
<hr>
<p class="text-center"> Add items </p>

<form>
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="inputState">Pizzas</label>
      <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>Regular</option>
        <option>Sicilian</option>
      </select>
    </div>
    <div class="form-group col-md-4">
      <label for="inputState">Type</label>
      <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>Cheese</option>
        <option>Special</option>
      </select>
    </div>
    <div class="form-group col-md-2">
      <label for="inputState">Toppings</label>
      <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
      </select>
    </div>
    <div class="form-group col-md-2">
      <label for="inputState">Size</label>
      <select id="inputState" class="form-control">
        <option selected>Choose...</option>
        <option>Small</option>
        <option>Large</option>
      </select>
    </div>
  </div>
  <button type="submit" class="btn btn-dark">Add</button>
</form>

<br>
<br>
<div class="row">
  <div class="col-6">
    <form id="salad_form" method="post">
      {% csrf_token %}
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputState">Salads</label>
          <select id="salad" class="form-control">
            <option selected>Choose...</option>
            {% for salad in Salads %}
            <option>{{salad.name}}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-dark">Add</button>
    </form>
  </div>
  <div class="col-6">
    <form id="pasta_form" method="post">
      {% csrf_token %}
      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputState">Pastas</label>
          <select id="pasta" class="form-control">
            <option selected>Choose...</option>
            {% for pasta in Pastas %}
            <option>{{pasta.name}}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-dark">Add</button>
    </form>
    </div>
</div>
{% endblock %}

{% block exit %}
<a href="{% url 'logout' %}" class="btn btn-outline-danger" role="button" aria-pressed="true"> Sign Out </a>
{% endblock %}

{% block js %}

  function post_new_salad_order() {
    const request = new XMLHttpRequest();
    var select_bar = document.getElementById("salad");
    var salad_choice = select_bar.options[select_bar.selectedIndex].text;
    request.open('POST', '/order_salad');

    request.onload = () => {
        location.reload();
    };
    const data = new FormData();
    data.append('salad_type', salad_choice);
    request.send(data);
  };

  function post_new_pasta_order() {
    const request = new XMLHttpRequest();
    var select_bar = document.getElementById("pasta");
    var pasta_choice = select_bar.options[select_bar.selectedIndex].text;
    request.open('POST', '/order_pasta');

    request.onload = () => {
        location.reload();
    };
    const data = new FormData();
    data.append('pasta_type', pasta_choice);
    request.send(data);
  };

   document.addEventListener('DOMContentLoaded', () => {
         document.querySelector('#salad_form').onsubmit = () => post_new_salad_order();
         document.querySelector('#pasta_form').onsubmit = () => post_new_pasta_order();
    });

{% endblock %}
